#!/usr/bin/env ruby

require "bundler/setup"
require "gitomator/classroom"
require "gitomator/classroom/script_util"


module Gitomator
  module Classroom
    module Console

      @@context

      def self.context=(context)
        @@context=context
      end

      def gitomator_context
        @@context
      end

      def logger
        @@context.logger
      end

      def git
        @@context.git
      end

      def hosting
        @@context.hosting
      end

      def ci
        @@context.ci
      end

    end
  end
end

opts = Gitomator::Classroom::ScriptUtil::DefaultOptionParser.new(
  "Usage: #{File.basename($0)}"
).parse(ARGV)


if opts[:context]
  require 'gitomator/classroom/context'
  Gitomator::Classroom::Console.context =
    Gitomator::Classroom::Context.from_file(
      opts[:context]
  )
  include Gitomator::Classroom::Console
end


require "irb"
IRB.start
