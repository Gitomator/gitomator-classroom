#!/usr/bin/env ruby

require "bundler/setup"
require "classroom_automator"


module ClassroomAutomator
  module Console

    @@context

    def self.context=(context)
      @@context=context
    end

    def classroom_automator_context
      @@context
    end

    def logger
      @@context.logger
    end

    def git
      @@context.git
    end

    def hosting
      @@context.hosting
    end

    def ci
      @@context.ci
    end

  end
end


opts = ClassroomAutomator::Script::OptParser.new("Usage: #{File.basename($0)}").parse(ARGV)

if opts[:context]
  require 'classroom_automator/workflow/context'
  ClassroomAutomator::Console.context =
    ClassroomAutomator::Workflow::Context.from_file(
      opts[:context]
  )
  include ClassroomAutomator::Console
end


require "irb"
IRB.start
